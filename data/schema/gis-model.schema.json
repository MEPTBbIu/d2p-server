{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "A single Message or an array of Messages",
	"oneOf": [
		{
			"type": "object",
			"$ref": "#/definitions/GIS_Message"
		},
		{
			"type": "object",
			"minProperties":1,
			"properties": {
				"$schema":{
					"type":"string",
					"default":"./schema/gis-model.schema.json"
				}
			},
			"patternProperties": {
				"^[0-9]{4}":{
					"type": "object",
				"$ref": "#/definitions/GIS_Message"
				}
			}
		}
	],
	"definitions": {
		"GIS_HeroAbilities": {
			"type": "object",
			"patternProperties": {
				"^(ability)+[0-3]{1}$": {
					"$ref": "#/definitions/GIS_AbilityBase"
				}
			},
			"additionalProperties": false
		},
		"GIS_PlayerItems": {
			"type": "object",
			"patternProperties": {
				"^(slot)+[0-8]{1}$": {
					"$ref": "#/definitions/GIS_ItemBase"
				},
				"^(stash)+[0-5]{1}$": {
					"type": "object",
					"$ref": "#/definitions/GIS_ItemBase"
				}
			},
			"additionalProperties": false
		},
		"GIS_AbilityBase": {
			"$id": "/definitions/GIS_AbilityBase",
			"type": "object",
			"properties": {
				"ability_active": {
					"type": "boolean"
				},
				"can_cast": {
					"type": "boolean"
				},
				"cooldown": {
					"type": "number"
				},
				"level": {
					"type": "number"
				},
				"name": {
					"$ref": "gis-enums.schema.json#/definitions/npc_dota_hero_ability"
				},
				"passive": {
					"type": "boolean"
				},
				"ultimate": {
					"type": "boolean"
				}
			},
			"required": ["name"],
			"additionalProperties": false
		},
		"GIS_Auth": {
			"$id": "/definitions/GIS_Auth",
			"type": "object",
			"properties": {
				"token": {
					"type": "string"
				}
			},
			"additionalProperties": false
		},
		"GIS_Hero": {
			"$id": "/definitions/GIS_Hero",
			"type": "object",
			"properties": {
				"xpos": {
					"type": "integer"
				},
				"ypos": {
					"type": "integer"
				},
				"alive": {
					"type": "boolean"
				},
				"break": {
					"type": "boolean"
				},
				"buyback_cooldown": {
					"type": "number"
				},
				"buyback_cost": {
					"type": "number"
				},
				"disarmed": {
					"type": "boolean"
				},
				"has_debuff": {
					"type": "boolean"
				},
				"health": {
					"type": "number"
				},
				"health_percent": {
					"type": "number"
				},
				"hexed": {
					"type": "boolean"
				},
				"id": {
					"type": "number"
				},
				"level": {
					"type": "number"
				},
				"magicimmune": {
					"type": "boolean"
				},
				"mana": {
					"type": "number"
				},
				"mana_percent": {
					"type": "number"
				},
				"max_health": {
					"type": "number"
				},
				"max_mana": {
					"type": "number"
				},
				"muted": {
					"type": "boolean"
				},
				"name": {
					"$ref": "gis-enums.schema.json#/definitions/npc_dota_hero"
				},
				"respawn_seconds": {
					"type": "number"
				},
				"silenced": {
					"type": "boolean"
				},
				"stunned": {
					"type": "boolean"
				}
			},
			"required": [
				"xpos",
				"ypos",
				"alive",
				"break",
				"buyback_cooldown",
				"buyback_cost",
				"disarmed",
				"has_debuff",
				"health",
				"health_percent",
				"hexed",
				"id",
				"level",
				"magicimmune",
				"mana",
				"mana_percent",
				"max_health",
				"max_mana",
				"muted",
				"name",
				"respawn_seconds",
				"silenced",
				"stunned"
			],
			"patternProperties": {
				"^(talent_)+[0-8]{1}": {
					"type": "boolean",
					"default": false
				}
			},
			"additionalProperties": false
		},
		"GIS_ItemBase": {
			"$id": "/definitions/GIS_ItemBase",
			"type": "object",
			"properties": {
				"can_cast": {
					"type": "boolean"
				},
				"charges": {
					"type": "number"
				},
				"contains_rune": {
					"type": "boolean"
				},
				"cooldown": {
					"type": "number"
				},
				"name": {
					"$ref": "gis-enums.schema.json#/definitions/npc_dota_items"
				},
				"passive": {
					"type": "boolean"
				},
				"purchaser": {
					"type": "number"
				}
			},
			"required": ["name"]
		},
		"GIS_Map": {
			"$id": "/definitions/GIS_Map",
			"description": "GIS_Map",
			"type": "object",
			"properties": {
				"clock_time": {
					"type": "number"
				},
				"customgamename": {
					"type": "string"
				},
				"daytime": {
					"type": "boolean",
					"default": true
				},
				"game_state": {
					"$ref": "#/definitions/GIS_GameState"
				},
				"game_time": {
					"type": "number"
				},
				"matchid": {
					"type": "string"
				},
				"name": {
					"type": "string"
				},
				"nightstalker_night": {
					"type": "boolean",
					"default": false
				},
				"paused": {
					"type": "boolean"
				},
				"ward_purchase_cooldown": {
					"type": "number"
				},
				"win_team": {
					"$ref": "#/definitions/GIS_PlayerTeam"
				}
			},
			"required": [
				"clock_time",
				"customgamename",
				"daytime",
				"game_state",
				"game_time",
				"matchid",
				"name",
				"nightstalker_night",
				"ward_purchase_cooldown",
				"win_team"
			],
			"additionalProperties": false
		},
		"GIS_PlayerTeam": {
			"$id": "/definitions/GIS_PlayerTeam",
			"type": "string",
			"enum": ["dire", "radiant", "none", "undefined"],
			"default": "undefined"
		},
		"GIS_PlayerActivity": {
			"$id": "/definitions/GIS_PlayerActivity",
			"enum": ["playing", "menu", "undefined"],
			"default": "undefined"
		},
		"GIS_Player": {
			"$id": "/definitions/GIS_Player",
			"type": "object",
			"properties": {
				"activity": {
					"$ref": "#/definitions/GIS_PlayerActivity"
				},
				"assists": {
					"type": "number"
				},
				"deaths": {
					"type": "number"
				},
				"denies": {
					"type": "number"
				},
				"gold": {
					"type": "number"
				},
				"gold_reliable": {
					"type": "number"
				},
				"gold_unreliable": {
					"type": "number"
				},
				"gpm": {
					"type": "number"
				},
				"kill_streak": {
					"type": "number"
				},
				"kills": {
					"type": "number"
				},
				"last_hits": {
					"type": "number"
				},
				"name": {
					"type": "string"
				},
				"steamid": {
					"type": "string",
					"minLength": 17,
					"maxLength": 17,
					"pattern": "^[0-9]{17}"
				},
				"team_name": {
					"$ref": "#/definitions/GIS_PlayerTeam"
				},
				"xpm": {
					"type": "number"
				},
				"kill_list": {
					"type": "string"
				},
				"pro_name": {
					"type": "string"
				}
			},
			"required": [
				"activity",
				"assists",
				"deaths",
				"denies",
				"gold",
				"gold_reliable",
				"gold_unreliable",
				"gpm",
				"kill_streak",
				"kills",
				"last_hits",
				"name",
				"steamid",
				"team_name",
				"xpm"
			],
			"additionalProperties": false
		},
		"GIS_Provider": {
			"$id": "/definitions/GIS_Provider",
			"type": "object",
			"description": "Провайдер предоставляющий даные.",
			"properties": {
				"appid": {
					"type": "integer",
					"title": "App Steam ID",
					"description": "ID приложения Steam отдающего даные. 570 - Dota 2, 571 - Dota 2 Test, 0 - Эмулятор",
					"default": 570,
					"enum": [
						570, 571, 0
					]
				},
				"name": {
					"type": "string",
					"title": "App name",
					"description": "Steam App Name",
					"default": "Dota 2",
					"enum":[
						"Dota 2", "Dota 2 Test", "Emulator"
					]
				},
				"timestamp": {
					"type": "integer"
				},
				"version": {
					"type": "integer",
					"default": 46,
					"description": "Версия протокола клиента.",
					"enum": [
						46
					]
				}
			},
			"required": ["appid", "name", "timestamp", "version"],
			"additionalProperties": false
		},
		"GIS_Message": {
			"$id": "/definitions/GIS_Message",
			"title": "GIS Message",
			"type": "object",
			"minProperties": 1,
			"properties": {
				"$schema":{
					"type":"string",
					"default":"./schema/gis-model.schema.json"
				},
				"abilities": {
					"$ref": "#/definitions/GIS_HeroAbilities"
				},
				"auth": {
					"$ref": "#/definitions/GIS_Auth"
				},
				"hero": {
					"$ref": "#/definitions/GIS_Hero"
				},
				"items": {
					"$ref": "#/definitions/GIS_PlayerItems"
				},
				"map": {
					"$ref": "#/definitions/GIS_Map"
				},
				"player": {
					"$ref": "#/definitions/GIS_Player"
				},
				"provider": {
					"$ref": "#/definitions/GIS_Provider"
				},
				"previously": {
					"$ref": "#/definitions/GIS_Message"
				}
			},
			"additionalProperties": false
		},
		"GIS_GameState": {
			"$id": "/definitions/GIS_GameState",
			"description": "GIS_GameState",
			"type": "string",
			"enum": [
				"DOTA_GAMERULES_STATE_INIT",
				"DOTA_GAMERULES_STATE_WAIT_FOR_PLAYERS_TO_LOAD",
				"DOTA_GAMERULES_STATE_CUSTOM_GAME_SETUP",
				"DOTA_GAMERULES_STATE_HERO_SELECTION",
				"DOTA_GAMERULES_STATE_STRATEGY_TIME",
				"DOTA_GAMERULES_STATE_TEAM_SHOWCASE",
				"DOTA_GAMERULES_STATE_PRE_GAME",
				"DOTA_GAMERULES_STATE_GAME_IN_PROGRESS",
				"DOTA_GAMERULES_STATE_POST_GAME",
				"DOTA_GAMERULES_STATE_DISCONNECT"
			],
			"default": "DOTA_GAMERULES_STATE_INIT"
		}
	}
}
